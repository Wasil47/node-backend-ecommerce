(this["webpackJsonpecommerce-react"]=this["webpackJsonpecommerce-react"]||[]).push([[0],{13:function(e,t,a){e.exports=a.p+"static/media/testProduct.4560de66.jpg"},24:function(e,t,a){e.exports=a.p+"static/media/testProduct.4560de66.jpg"},26:function(e,t,a){e.exports=a(46)},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},44:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(16),o=a.n(n),l=a(3);var s=function(){return c.a.createElement("nav",{className:"navbar navbar-expand-md navbar-dark bg-dark fixed-top"},c.a.createElement(l.c,{className:"navbar-brand",to:"/"},"Ecommerce"),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNav","aria-controls":"navbarNav","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNav"},c.a.createElement("ul",{className:"navbar-nav mr-auto"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.c,{className:"nav-link",to:"/"},"Products")),c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.c,{className:"nav-link",to:"/admin"},"Admin Panel"))),c.a.createElement("ul",{className:"navbar-nav"},c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.c,{className:"nav-link",to:"/user"},c.a.createElement("i",{className:"fa fa-user px-2","aria-hidden":"true",style:{fontSize:"1.3rem"}}))),c.a.createElement("li",{className:"nav-item"},c.a.createElement(l.c,{className:"nav-item nav-link",to:"/cart"},c.a.createElement("i",{className:"fa fa-shopping-cart px-2","aria-hidden":"true",style:{fontSize:"1.3rem"}}))))))},m=a(4),u=a(7),i=a(5),d=a(1),p=(a(35),"https://ecommerce-react-nodejs.herokuapp.com"),g=function(e){return e.json().then((function(t){if(!e.ok){var a=t&&t.message||e.statusText;throw console.log(a),Error(a)}return t}))},f=function(e){var t={method:"POST",body:new FormData(e)};return fetch("".concat(p,"/products"),t).then(g).then((function(e){return e})).catch((function(e){return console.log("frontend error",e)}))},E=function(){return fetch("".concat(p,"/products")).then(g).then((function(e){return e})).catch((function(e){return console.log("frontend error",e)}))},N=function(e,t){var a={method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}};return fetch("".concat(p,"/products/").concat(t),a).then(g).then((function(e){return e})).catch((function(e){return console.log("frontend error",e)}))},v=function(e){return fetch("".concat(p,"/products/").concat(e),{method:"DELETE",headers:{"Content-Type":"application/json"}}).then(g).then((function(e){return e})).catch((function(e){return console.log("frontend error",e)}))};var h=function(){var e={productName:"",productPrice:0,productStock:0,productImage:"",productDesc:""},t={file:"",imagePreviewUrl:""},a=Object(r.useState)(e),n=Object(d.a)(a,2),o=n[0],l=n[1],s=Object(r.useState)(t),m=Object(d.a)(s,2),p=m[0],g=m[1],E=function(e){var t=e.target.name,a=e.target.value;l(Object(i.a)(Object(i.a)({},o),{},Object(u.a)({},t,a)))};return c.a.createElement("div",{className:"container"},c.a.createElement("h2",null,"Add new product:"),c.a.createElement("form",{onSubmit:function(a){a.preventDefault(),f(a.target).then((function(a){a&&a.message&&console.log(a.message),l(e),g(t)}))}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productName"},"Name"),c.a.createElement("input",{value:o.productName,onChange:E,type:"text",className:"form-control",name:"productName"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productPrice"},"Price"),c.a.createElement("input",{value:o.productPrice,onChange:E,type:"number",className:"form-control",name:"productPrice",maxLength:"12"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productStock"},"Stock"),c.a.createElement("input",{value:o.productStock,onChange:E,type:"number",className:"form-control",name:"productStock",maxLength:"6"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productDesc"},"Description"),c.a.createElement("textarea",{value:o.productDesc,onChange:E,type:"text",className:"form-control",name:"productDesc",rows:"4"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productImage"},"Image"),c.a.createElement("input",{value:o.productImage,onChange:function(e){E(e);var t=new FileReader,a=e.target.files[0];t.onload=function(){g({file:a,imagePreviewUrl:t.result})},t.readAsDataURL(a)},type:"file",className:"form-control-file",name:"productImage",accept:"image/*",disabled:!0})),c.a.createElement("div",{className:"form-group"},p.imagePreviewUrl?c.a.createElement("img",{className:"imgPreview",src:p.imagePreviewUrl,alt:"imgPreview"}):c.a.createElement("div",{className:"previewText"},"Please select an Image for Preview")),c.a.createElement("button",{className:"btn btn-secondary"},"Submit")))},b=a(13),y=a.n(b);var O=function(e){var t=e.product,a=t.productId,n=Object(r.useState)(t),o=Object(d.a)(n,2),s=o[0],m=o[1],g=Object(r.useState)(!1),f=Object(d.a)(g,2),E=f[0],v=f[1],h=function(e){var t=e.target.name,a=e.target.value;m(Object(i.a)(Object(i.a)({},s),{},Object(u.a)({},t,a)))};return c.a.createElement("div",{className:"row align-items-center border-top py-1"},c.a.createElement("div",{className:"col-4 col-lg-2"},c.a.createElement(l.b,{to:"/product/".concat(t.productId)},c.a.createElement("img",{src:t.productImage?"".concat(p,"/").concat(t.productImage):y.a,className:"card-img-top",alt:t.productName}))),c.a.createElement("div",{className:"col-4 col-lg-1"},c.a.createElement("button",{onClick:function(){e.delete(t.productId)},className:"btn btn-danger btn-block px-0"},"Delete")),c.a.createElement("div",{className:"col-4 col-lg-1"},c.a.createElement("button",{onClick:function(){console.log(t.productId),v(!E)},className:"btn btn-warning btn-block px-0","data-toggle":"collapse","data-target":"#collapse"+a,"aria-expanded":"false","aria-controls":"collapse"+a},"Edit")),c.a.createElement("div",{className:"col-12 col-lg-4"},c.a.createElement("h5",null,t.productName)),c.a.createElement("div",{className:"col-6 col-lg-2"},c.a.createElement("p",{className:"text-right"},"$",t.productPrice)),c.a.createElement("div",{className:"col-6 col-lg-2"},c.a.createElement("p",{className:"text-right"},"x ",t.productStock," pcs.")),c.a.createElement("form",{className:"col-12 mb-3 collapse",id:"collapse"+a,onSubmit:function(t){t.preventDefault(),N(s,a).then((function(t){t&&t.message&&console.log(t.message),e.productsFetch()}))}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productName"},"Name"),c.a.createElement("input",{value:s.productName,onChange:h,type:"text",className:"form-control",name:"productName"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productPrice"},"Price"),c.a.createElement("input",{value:s.productPrice,onChange:h,type:"number",className:"form-control",name:"productPrice",maxLength:"12"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productStock"},"Stock"),c.a.createElement("input",{value:s.productStock,onChange:h,type:"number",className:"form-control",name:"productStock",maxLength:"6"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"productDesc"},"Description"),c.a.createElement("textarea",{value:s.productDesc,onChange:h,type:"text",className:"form-control",name:"productDesc",rows:"4"})),c.a.createElement("button",{className:"btn btn-secondary pull-right"},"Submit changes")))};var S=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],o=function(){E().then((function(e){n(e)}))},l=function(e){console.log(e),v(e).then((function(e){e&&e.message&&console.log(e.message),o()}))};return Object(r.useEffect)((function(){o()}),[]),c.a.createElement("div",{className:"container px-0 mt-4"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Products:")),c.a.createElement("div",{className:"d-flex flex-column"},a.map((function(e){return c.a.createElement(O,{product:e,key:e.productId,delete:l,productsFetch:o})}))))};var x=function(){return c.a.createElement("div",{className:"container-xl"},c.a.createElement("h1",null,"Hello Admin!"),c.a.createElement("h5",{style:{color:"red"}},"You dont have permission to POST, PUT, PATCH or DELETE. Only GET, sorry!"),c.a.createElement(h,null),c.a.createElement(S,null))},j=(a(36),a(37),a(24)),w=a.n(j);var P=function(e){var t=e.product;return c.a.createElement("div",{className:"col-md-6 col-lg-4 col-xl-3 mb-4"},c.a.createElement("div",{className:"card h-100 product"},c.a.createElement(l.b,{to:"/product/".concat(t.productId)},c.a.createElement("img",{src:t.productImage?"".concat(p,"/").concat(t.productImage):w.a,className:"card-img-top",alt:t.productName})),c.a.createElement("div",{className:"card-body d-flex flex-column"},c.a.createElement(l.b,{to:"/product/".concat(t.productId),style:{color:"#000",textDecoration:"none"}},c.a.createElement("h5",{className:"card-title"},t.productName)),c.a.createElement("p",{className:"card-text"},"$",t.productPrice),c.a.createElement("p",{className:"card-text"},c.a.createElement("small",{className:"text-muted"},t.productDesc.length>100?t.productDesc.substring(0,100)+" ...":t.productDesc)),c.a.createElement("button",{onClick:function(){e.toCart(t)},className:"mt-auto btn btn-warning btn-block"},"Add to Cart"))))},I=function(){var e=JSON.parse(localStorage.getItem("user"));return e&&e.token?{"x-access-token":e.token}:{}},C=function(e){var t=JSON.stringify(e),a=new Headers(I());a.append("Content-Type","application/json");var r={method:"POST",body:t,headers:a};return fetch("".concat(p,"/orders/create"),r).then(g).then((function(e){return localStorage.removeItem("cartProducts"),e})).catch((function(e){return console.log("frontend error",e)}))},T=function(e){var t=JSON.parse(localStorage.getItem("cartProducts"))||[],a=t.find((function(t){return t.productId===e.productId}));if(a){var r=t.indexOf(a);e.quantity=a.quantity+1,t.splice(r,1,e)}else e.quantity=1,t.push(e);localStorage.setItem("cartProducts",JSON.stringify(t))};var k=function(){var e=Object(r.useState)([]),t=Object(d.a)(e,2),a=t[0],n=t[1],o=function(e){T(e),console.log("Add to Cart: "+e.productName)};return Object(r.useEffect)((function(){E().then((function(e){n(e)}))}),[]),c.a.createElement("div",{className:"container-xl"},c.a.createElement("div",{className:"col"},c.a.createElement("h1",null,"Products:")),c.a.createElement("div",{className:"row"},a.map((function(e){return c.a.createElement(P,{product:e,key:e.productId,toCart:o})}))))};var A=function(){return c.a.createElement(k,null)};a(38),a(39);var D=function(e){var t=e.product,a=t.productPrice*t.quantity,n=Object(r.useState)(a),o=Object(d.a)(n,2),s=(o[0],o[1]),m=Object(r.useState)(t.quantity),u=Object(d.a)(m,2),i=u[0],g=u[1],f=(JSON.parse(localStorage.getItem("cartProducts"))||[]).findIndex((function(e){return e.productId===t.productId})),E=function(t){g(t.quantity),s(t.productPrice*t.quantity),e.checkPrice()};return c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-md"},c.a.createElement(l.b,{to:"/products/".concat(t.productId)},c.a.createElement("img",{className:"cartImg",src:t.productImage?"".concat(p,"/").concat(t.productImage):y.a,alt:"testImg"}))),c.a.createElement("div",{className:"col-md"},c.a.createElement(l.b,{to:"/products/".concat(t.productId),style:{color:"#000",textDecoration:"none"}},c.a.createElement("h5",null,t.productName)),c.a.createElement("p",null,t.productDesc.length>100?t.productDesc.substring(0,100)+" ...":t.productDesc)),c.a.createElement("div",{className:"col-md row align-items-center px-0 m-0"},c.a.createElement("div",{className:"col-4"},c.a.createElement("div",{className:"quantity "},c.a.createElement("input",{onClick:function(){var e=JSON.parse(localStorage.getItem("cartProducts"))||[];t.quantity<100&&(t.quantity++,e.splice(f,1,t),localStorage.setItem("cartProducts",JSON.stringify(e))),E(t)},type:"button",value:"+",className:"countBtn"}),c.a.createElement("input",{type:"number",min:1,max:100,step:"1",className:"countItem text-right",value:i,onChange:function(e){var a=JSON.parse(localStorage.getItem("cartProducts"))||[];t.quantity=e.target.value,t.quantity<=0?(a.splice(f,1),window.location.reload(!1)):a.splice(f,1,t),localStorage.setItem("cartProducts",JSON.stringify(a)),E(t),0===a.length&&localStorage.removeItem("cartProducts")}}),c.a.createElement("input",{onClick:function(){var e=JSON.parse(localStorage.getItem("cartProducts"))||[];t.quantity>=1&&(t.quantity--,t.quantity<=0?(e.splice(f,1),window.location.reload(!1)):e.splice(f,1,t),localStorage.setItem("cartProducts",JSON.stringify(e))),E(t),0===e.length&&localStorage.removeItem("cartProducts")},type:"button",value:"-",className:"countBtn"}))),c.a.createElement("div",{className:"col-5"},c.a.createElement("h6",{className:"my-0"},"x $ ",t.productPrice)),c.a.createElement("div",{className:"col-3"},c.a.createElement("button",{onClick:function(){var e=JSON.parse(localStorage.getItem("cartProducts"))||[];t.quantity=0,e.splice(f,1),window.location.reload(!1),localStorage.setItem("cartProducts",JSON.stringify(e)),E(t),0===e.length&&localStorage.removeItem("cartProducts")},className:"btn btn-outline-danger"},c.a.createElement("i",{className:"fa fa-trash"}))))))};var F=function(e){var t=JSON.parse(localStorage.getItem("cartProducts"))||[],a=Object(r.useState)(t),n=Object(d.a)(a,2),o=n[0],l=(n[1],Object(r.useState)(0)),s=Object(d.a)(l,2),m=s[0],u=s[1],i=function(){var t=JSON.parse(localStorage.getItem("cartProducts"))||[],a=0;t.forEach((function(e){return a+=e.quantity*e.productPrice}));var r=Math.round(100*a)/100;u(r),e.setPrice(r),e.refresh()};return Object(r.useEffect)((function(){i()}),[]),c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header bg-secondary text-white"},c.a.createElement("h5",{className:"mr-auto"},"Shopping Cart")),o.map((function(e,t){return c.a.createElement(D,{product:e,key:t,checkPrice:i})})),c.a.createElement("div",{className:"card-footer"},c.a.createElement("h5",{className:"pull-right"},c.a.createElement("span",{className:"text-muted"},"Price: "),"$",m)))},L=a(6),_=function(e,t){var a={method:"POST",body:JSON.stringify({login:e,password:t}),headers:{"Content-Type":"application/json"}};return fetch("".concat(p,"/user/login"),a).then(g).then((function(e){return localStorage.setItem("user",JSON.stringify(e)),e})).catch((function(e){return console.log("frontend error",e)}))},U=function(){localStorage.removeItem("user")},q=function(e){var t={method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}};return fetch("".concat(p,"/user/register"),t).then(g).then((function(e){return e})).catch((function(e){return console.log("frontend error",e)}))},J=function(){var e={method:"GET",headers:I()};return fetch("".concat(p,"/user/authorized"),e).then(g).then((function(e){return e[0]})).catch((function(e){return console.log("frontend error",e)}))},R=function(e){var t={method:"GET",headers:I()};return fetch("".concat(p,"/orders/").concat(e),t).then(g).then((function(e){return e})).catch((function(e){console.log("frontend error",e)}))},H=function(e){var t={method:"GET",headers:I()};return fetch("".concat(p,"/orders/details/").concat(e),t).then(g).then((function(e){return e})).catch((function(e){return console.log("frontend error",e)}))},G=function(e){var t=JSON.stringify(e),a=new Headers(I());a.append("Content-Type","application/json");var r={method:"PATCH",body:t,headers:a};return fetch("".concat(p,"/user/authorized"),r).then(g).then((function(e){return e})).catch((function(e){return console.log("frontend error",e)}))},$=function(){var e={method:"GET",headers:I()};return fetch("".concat(p,"/user/auth"),e).then((function(e){return!!e.ok})).catch((function(e){return console.log("frontend error",e)}))},z=function(e){return{type:"AUTH_SUCCESS",user:e}},B=function(e){return{type:"AUTH_FAIL",error:e}},X=function(e){return{type:"GET_USER_DATA_SUCCESS",userData:e}},Y=function(){return{type:"GET_USER_DATA_FAIL"}};var M=function(e){var t=Object(L.c)((function(e){return e.userReducer})),a=Object(L.c)((function(e){return e.authReducer.loggedIn})),n=Object(r.useState)(t),o=Object(d.a)(n,2),s=o[0],m=o[1],p=Object(L.b)(),g=function(){J().then((function(e){e&&(p(X(e)),m(e))}),(function(e){p(B(e)),p(Y())}))},f=function(e){var t=e.target.name,a=e.target.value;m(Object(i.a)(Object(i.a)({},s),{},Object(u.a)({},t,a)))};return Object(r.useEffect)((function(){!function(){var e=JSON.parse(localStorage.getItem("user"));e&&e.token?$().then((function(e){e||(p(B(e.message)),p(Y()),console.log("authorized:",e),U()),e&&(p(z()),console.log("authorized:",e),g())})):p(B("No Token!"))}()}),[]),c.a.createElement(r.Fragment,null,c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header bg-secondary text-white"},c.a.createElement("h5",{className:"mr-auto"},"Shipping Address")),c.a.createElement("div",{className:"card-body row"},c.a.createElement("form",{className:"col-md-6"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerName"},"Name:"),c.a.createElement("input",{value:s.customerName,onChange:f,type:"text",className:"form-control",name:"customerName",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerLastname"},"Lastname:"),c.a.createElement("input",{value:s.customerLastname,onChange:f,type:"text",className:"form-control",name:"customerLastname",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerAddress"},"Address:"),c.a.createElement("textarea",{value:s.customerAddress,onChange:f,type:"text",className:"form-control",name:"customerAddress",rows:"4",required:!0}))),c.a.createElement("div",{className:"col-md-6 d-flex flex-column"},c.a.createElement("ul",{className:"list-group"},e.products.map((function(e){return c.a.createElement("li",{key:e.productId,className:"list-group-item d-flex justify-content-between align-items-center py-1"},e.productName.length>14?e.productName.substring(0,12)+" ...":e.productName,c.a.createElement("span",{className:"badge badge-primary badge-pill"},e.quantity))}))),c.a.createElement("fieldset",{className:"form-group mt-4"},c.a.createElement("div",{className:"row"},c.a.createElement("legend",{className:"col-form-label col-6"},"Shipping method:"),c.a.createElement("div",{className:"col-6"},c.a.createElement("div",{className:"form-check"},c.a.createElement("input",{className:"form-check-input",type:"radio",name:"orderShipping",value:"20",defaultChecked:!0}),c.a.createElement("label",{className:"form-check-label",htmlFor:"exampleRadios1"},"DHL - $0")),c.a.createElement("div",{className:"form-check"},c.a.createElement("input",{className:"form-check-input",type:"radio",name:"orderShipping",value:"10",disabled:!0}),c.a.createElement("label",{className:"form-check-label",htmlFor:"exampleRadios1"},"DPD - $0"))))))),c.a.createElement("div",{className:"card-footer"},c.a.createElement("h5",{className:"pull-right"},c.a.createElement("span",{className:"text-muted"},"Total price: "),"$",e.totalPrice))),c.a.createElement("div",{className:"my-3 ml-auto d-flex flex-row"},0===e.products.length&&c.a.createElement(l.b,{to:"/products",style:{color:"#f75050",textDecoration:"none"},className:"form-text text-danger mx-2"},c.a.createElement("small",{className:"align-middle"},"Add product to Cart")),!a&&c.a.createElement(l.b,{to:"/user/",style:{color:"#f75050",textDecoration:"none"},className:"form-text text-danger mx-2"},c.a.createElement("small",{className:"align-middle"},"Login to continue")),c.a.createElement("button",{onClick:function(){var t=e.products,a={orderNumber:Math.round(Date.now()/1e3),orderCustomerId:s.customerId,orderAmount:e.totalPrice,orderAddress:s.customerAddress};C({order:a,products:t}).then((function(e){e&&e.message&&console.log(e.message),window.location.reload(!1)}))},className:"btn btn-success",disabled:!a||0===e.products.length},"Finalize Order")))};var W=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)([]),l=Object(d.a)(o,2),s=l[0],m=l[1],u=Object(r.useState)(0),i=Object(d.a)(u,2),p=i[0],g=i[1],f=function(){var e=JSON.parse(localStorage.getItem("cartProducts"))||[];m(e)};return Object(r.useEffect)((function(){f()}),[]),c.a.createElement("div",{className:"d-flex flex-column"},c.a.createElement(F,{setPrice:function(e){g(e)},refresh:f}),c.a.createElement("button",{onClick:function(){n(!a),f()},className:"btn btn-info my-3 ml-auto"},"Shipping Methods"),c.a.createElement("h5",{style:{color:"red"}},"You dont have permission to POST, PUT, PATCH or DELETE. Only GET, sorry!"),a&&c.a.createElement(M,{products:s,totalPrice:p}))};var Q=function(){var e=Object(m.e)().id,t=Object(r.useState)({productName:"",productPrice:"",productStock:"",productImage:"",productDesc:""}),a=Object(d.a)(t,2),n=a[0],o=a[1];return Object(r.useEffect)((function(){fetch("".concat(p,"/products/")+e).then((function(e){return e.json()})).then((function(e){o(e)})).catch((function(e){console.log("product not found, ",e),o({productName:"Product not found"})}))}),[]),c.a.createElement("div",{className:"row border rounded"},c.a.createElement("div",{className:"col-md-5"},c.a.createElement("img",{src:n.productImage?"".concat(p,"/").concat(n.productImage):y.a,className:"card-img-top",alt:n.productName})),c.a.createElement("aside",{className:"col-md-7 d-flex flex-column p-3"},c.a.createElement("h3",null,n.productName),c.a.createElement("h4",{className:"text-info"},"$ ",n.productPrice),c.a.createElement("p",{className:"text-muted"},"stock: ",n.productStock),c.a.createElement("dl",{className:"mt-1"},c.a.createElement("dt",null,"Description:"),c.a.createElement("dd",null,n.productDesc)),c.a.createElement("button",{onClick:function(){T(n),console.log("Add to Cart: "+n.productName)},className:"mt-auto btn btn-warning font-weight-bold"},c.a.createElement("i",{className:"fa fa-shopping-cart px-3","aria-hidden":"true",style:{fontSize:"1.3rem"}}),"ADD TO CART")))};var V=function(){var e=Object(r.useState)({login:"test",password:"test"}),t=Object(d.a)(e,2),a=t[0],n=t[1],o=Object(r.useState)(!1),l=Object(d.a)(o,2),s=l[0],m=l[1],p=Object(L.b)(),g=function(e){var t=e.target.name,r=e.target.value;n(Object(i.a)(Object(i.a)({},a),{},Object(u.a)({},t,r)))};return c.a.createElement("div",{className:"col-md-6 my-2"},c.a.createElement("h3",{className:"text-secondary"},"Login"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),_(a.login,a.password).then((function(e){e?(m(!1),p(z(e))):m(!0)}),(function(e){p(B(e))}))}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"login"},"Login"),c.a.createElement("input",{value:a.login,onChange:g,type:"text",name:"login",className:"form-control"+(a.login?"":" is-invalid"),required:!0}),c.a.createElement("small",{className:"form-text text-muted"},"login: test")),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{value:a.password,onChange:g,type:"password",name:"password",className:"form-control"+(a.password?"":" is-invalid"),required:!0}),c.a.createElement("small",{className:"form-text text-muted"},"password: test")),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login"),s&&c.a.createElement("small",{className:"form-text text-danger"},"Wrong login or password.")))};var K=function(){var e={login:"",password:"",customerName:"",customerLastname:"",customerAddress:""},t=Object(r.useState)(e),a=Object(d.a)(t,2),n=a[0],o=a[1],l=function(e){var t=e.target.name,a=e.target.value;o(Object(i.a)(Object(i.a)({},n),{},Object(u.a)({},t,a)))},s=function(){q(n).then((function(t){t&&t.message&&(console.log(t.message),o(e))}),(function(e){console.log(e)}))};return c.a.createElement("div",{className:"col-md-6 my-2"},c.a.createElement("h3",{className:"text-secondary"},"Register"),c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),s()}},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"login"},"Login"),c.a.createElement("input",{value:n.login,onChange:l,type:"text",name:"login",className:"form-control",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{value:n.password,onChange:l,type:"password",name:"password",className:"form-control",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerName"},"First Name"),c.a.createElement("input",{value:n.customerName,onChange:l,type:"text",name:"customerName",className:"form-control",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerLastname"},"Last Name"),c.a.createElement("input",{value:n.customerLastname,onChange:l,type:"text",name:"customerLastname",className:"form-control",required:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerAddress"},"Address:"),c.a.createElement("textarea",{value:n.customerAddress,onChange:l,type:"text",className:"form-control",name:"customerAddress",rows:"2"}),c.a.createElement("small",{className:"form-text text-muted"},"Shipping address - You can set it any time.")),c.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Register")),c.a.createElement("h5",{style:{color:"red"}},"You dont have permission to POST, PUT, PATCH or DELETE. Only GET, sorry!"))};var Z=function(e){var t=e.order,a=t.orderId,n=Object(r.useState)([]),o=Object(d.a)(n,2),s=o[0],m=o[1];return Object(r.useEffect)((function(){H(a).then((function(e){e&&m(e)}))}),[]),c.a.createElement("div",{className:"row align-items-center py-3 border-bottom"},c.a.createElement("div",{className:"col-6 col-lg-2 font-weight-bold"},t.orderNumber),c.a.createElement("div",{className:"col-12 col-lg-5"},t.orderAddress),c.a.createElement("div",{className:"col-6 col-lg-2 font-weight-bold"},"$ ",t.orderAmount),c.a.createElement("div",{className:"col-8 col-lg-2 my-1"},c.a.createElement("button",{className:"btn btn-warning btn-block px-0","data-toggle":"collapse","data-target":"#collapse"+a,"aria-expanded":"false","aria-controls":"collapse"+a},"Show details")),c.a.createElement("div",{className:"col-4 col-lg-1 my-1"},c.a.createElement("button",{className:"btn btn-danger btn-block px-0",disabled:!0},"Delete")),c.a.createElement("div",{className:"col-12 collapse my-1 px-0",id:"collapse"+a},c.a.createElement("div",{className:"row align-items-center mb-1"},c.a.createElement("div",{className:"col-0 col-lg-1 text-right"}),c.a.createElement("div",{className:"col-12 col-lg-7 text-center"},c.a.createElement("small",null,"Product Name")),c.a.createElement("div",{className:"col-6 col-lg-2 text-right"},c.a.createElement("small",null,"Product Price")),c.a.createElement("div",{className:"col-6 col-lg-2"},c.a.createElement("small",null,"Quantity"))),s.map((function(e,t){return t++,c.a.createElement("div",{className:"row align-items-center my-1",key:t+"product"},c.a.createElement("div",{className:"col-2 col-lg-1 text-right"},t,"."),c.a.createElement("div",{className:"col-10 col-lg-7 text-primary"},c.a.createElement(l.b,{to:"/products/".concat(e.detailProductId)},e.detailName)),c.a.createElement("div",{className:"col-6 col-lg-2 text-right"},"$ ",e.detailPrice),c.a.createElement("div",{className:"col-6 col-lg-2"},"x ",e.detailQuantity," pcs."))}))))};var ee=function(e){var t=Object(L.c)((function(e){return e.userReducer})),a=Object(r.useState)(t),n=Object(d.a)(a,2),o=n[0],l=n[1],s=Object(r.useState)([]),m=Object(d.a)(s,2),p=m[0],g=m[1],f=Object(L.b)(),E=function(e){R(e).then((function(e){e&&g(e)}))},N=function(e){var t=e.target.name,a=e.target.value;l(Object(i.a)(Object(i.a)({},o),{},Object(u.a)({},t,a)))};return Object(r.useEffect)((function(){J().then((function(e){e&&(f(X(e)),l(e),E(e.customerId))}),(function(e){f(B(e)),f(Y())}))}),[]),c.a.createElement("div",{className:"col my-2"},c.a.createElement("h3",{className:"text-secondary"},"User panel:"),c.a.createElement("div",{className:"card"},c.a.createElement("div",{className:"card-header bg-secondary text-white"},c.a.createElement("h5",{className:"mr-auto"},"User details:")),c.a.createElement("div",{className:"card-body"},c.a.createElement("form",{onSubmit:function(e){e.preventDefault(),G(o).then((function(e){e&&e.message&&console.log(e.message)}),(function(e){console.log(e),f(B(e))}))},className:"row",id:"update-user-form"},c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerName"},"Name:"),c.a.createElement("input",{value:o.customerName,onChange:N,type:"text",className:"form-control",name:"customerName"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerLastname"},"Lastname:"),c.a.createElement("input",{value:o.customerLastname,onChange:N,type:"text",className:"form-control",name:"customerLastname"})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"customerAddress"},"Address:"),c.a.createElement("textarea",{value:o.customerAddress,onChange:N,type:"text",className:"form-control",name:"customerAddress",rows:"4"}))),c.a.createElement("div",{className:"col-md-6"},c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"login"},"Login"),c.a.createElement("input",{value:o.login,onChange:N,type:"text",name:"login",className:"form-control",disabled:!0})),c.a.createElement("div",{className:"form-group"},c.a.createElement("label",{htmlFor:"password"},"Password"),c.a.createElement("input",{value:o.password,onChange:N,type:"password",name:"password",className:"form-control",disabled:!0}))))),c.a.createElement("div",{className:"card-footer"},c.a.createElement("button",{type:"submit",form:"update-user-form",className:"btn btn-danger pull-right"},"Change data"))),c.a.createElement("div",{className:"card mt-2"},c.a.createElement("div",{className:"card-header bg-secondary text-white"},c.a.createElement("h5",{className:"mr-auto"},"User orders:")),c.a.createElement("div",{className:"card-body"},c.a.createElement("div",{className:"d-flex flex-column"},c.a.createElement("div",{className:"row align-items-center"},c.a.createElement("div",{className:"col-4 col-lg-2"},c.a.createElement("small",null,"Number")),c.a.createElement("div",{className:"col-4 col-lg-5"},c.a.createElement("small",null,"Address")),c.a.createElement("div",{className:"col-4 col-lg-2"},c.a.createElement("small",null,"Total Price"))),p.map((function(e){return c.a.createElement(Z,{order:e,key:e.orderId})})))),c.a.createElement("div",{className:"card-footer"},c.a.createElement("button",{onClick:e.fetchUserOrders,className:"btn btn-primary pull-right"},"Refresh"))),c.a.createElement("button",{onClick:function(){U(),window.location.reload()},className:"btn btn-danger mt-2"},"Logout"))};var te=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),a=t[0],n=(t[1],Object(L.c)((function(e){return e.userReducer}))),o=Object(L.c)((function(e){return e.authReducer.loggedIn})),l=Object(L.b)();return Object(r.useEffect)((function(){!function(){var e=JSON.parse(localStorage.getItem("user"));e&&e.token?$().then((function(e){e||(l(B(e)),l(Y()),console.log("authorized:",e),U()),e&&(l(z()),console.log("authorized:",e))})):l(B("No Token!"))}()}),[]),c.a.createElement(r.Fragment,null,!a&&c.a.createElement("div",{className:"container-xl"},c.a.createElement("h1",null,"Hello ",n.customerName?n.customerName:"User","!"),c.a.createElement("div",{className:"row"},o?c.a.createElement(ee,{logIn:o}):c.a.createElement(r.Fragment,null,c.a.createElement(V,null),c.a.createElement(K,null)))))};var ae=function(){return c.a.createElement("main",{className:"container-xl",style:{paddingTop:"5rem"}},c.a.createElement(l.a,null,c.a.createElement(s,null),c.a.createElement(m.a,{exact:!0,path:"/",component:A}),c.a.createElement(m.a,{exact:!0,path:"/product/:id",component:Q}),c.a.createElement(m.a,{exact:!0,path:"/admin",component:x}),c.a.createElement(m.a,{exact:!0,path:"/cart",component:W}),c.a.createElement(m.a,{exact:!0,path:"/user",component:te})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(41),a(43),a(44),a(45);var re=a(14),ce={loggedIn:!1},ne=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"AUTH_START":return{loading:!0};case"AUTH_SUCCESS":return{loggedIn:!0,user:t.user};case"AUTH_FAIL":return{loggedIn:!1,error:t.error};case"LOGOUT":return{loggedIn:!1};default:return e}},oe=[],le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:oe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_PRODUCT_TO_CART":default:return e}},se={customerId:"",customerName:"",customerLastname:"",customerAddress:"",login:"",password:""},me=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:se,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GET_USER_DATA_SUCCESS":return t.userData;case"GET_USER_DATA_FAIL":return se;default:return e}},ue=Object(re.b)({authReducer:ne,cartReducer:le,userReducer:me}),ie=Object(re.c)(ue,window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__());o.a.render(c.a.createElement(L.a,{store:ie},c.a.createElement(ae,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[26,1,2]]]);
//# sourceMappingURL=main.922b250f.chunk.js.map